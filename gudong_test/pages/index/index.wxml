<!--index.wxml-->
<navigation-bar title="Weixin" back="{{false}}" color="black" background="#FFF"></navigation-bar>
<scroll-view class="scrollarea" scroll-y type="list">
  <view class="container">
    <!-- 用户信息和天气简报 -->
    <view class="user-info-section">
      <view class="user-info">
        <image class="avatar" src="{{userInfo.avatarUrl}}"></image>
        <text class="nickname">{{userInfo.nickName}}</text>
      </view>
      <view class="weather-info">
        <text class="temperature">{{weather.temperature}}°C</text>
        <text class="weather-desc">{{weather.description}}</text>
      </view>
    </view>

    <!-- 饮水进度圆环 -->
    <view class="water-progress-section">
      <view class="progress-circle">
        <view class="progress-text">
          <text class="current">{{todayWater}}ml</text>
          <text class="target">/ {{waterGoal}}ml</text>
        </view>
      </view>
    </view>

    <!-- 快捷喝水按钮组 -->
    <view class="quick-drink-section">
      <view class="button-group">
        <button class="drink-btn" bindtap="addWater" data-amount="250">+250ml</button>
        <button class="drink-btn" bindtap="addWater" data-amount="500">+500ml</button>
        <button class="drink-btn custom" bindtap="showCustomInput">自定义</button>
      </view>
      <button class="other-drink-btn" bindtap="showOtherDrinks">添加其他饮品</button>
    </view>

    <!-- 提醒设置入口 -->
    <view class="reminder-section">
      <view class="reminder-header">
        <text class="title">定时提醒</text>
        <switch checked="{{reminderEnabled}}" bindchange="toggleReminder" color="#4A90E2"/>
      </view>
      <view class="reminder-settings" wx:if="{{reminderEnabled}}">
        <picker mode="selector" range="{{intervalOptions}}" value="{{intervalIndex}}" bindchange="changeInterval">
          <view class="picker">
            提醒间隔：{{intervalOptions[intervalIndex]}}
          </view>
        </picker>
        <picker mode="selector" range="{{reminderTypes}}" value="{{reminderTypeIndex}}" bindchange="changeReminderType">
          <view class="picker">
            提醒方式：{{reminderTypes[reminderTypeIndex]}}
          </view>
        </picker>
      </view>
    </view>
  </view>
</scroll-view>
